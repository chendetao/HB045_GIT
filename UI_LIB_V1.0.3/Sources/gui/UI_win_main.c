
#include "string.h"
#include "Window.h"

#include "OSAL.h"
#include "OSAL_Timer.h"
#include "Task_GUI.h"

#include "LCD_ST7735.h"
#include "UserSetting.h"
#include "UI_Draw.h"

#include "UI_main_icon.h"
#include "ClockTick.h"
#include "Task_Step.h"
#include "Task_Battery.h"

#define COLOR_B      0XF3E0
#define COLOR_F      0xFFFF

#define PEDO_0() (pedometer.counter%10)
#define PEDO_1() ((pedometer.counter/10)%10)
#define PEDO_2() ((pedometer.counter/100)%10)
#define PEDO_3() ((pedometer.counter/1000)%10)

const unsigned char p[] = {0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00};/*"F:\BandAll\HB030\UI_0923\point.bmp",0*/

void UI_Draw_Buttom(int index, int color)
{
	DrawUI_Bitmap_Ex( 0,144, 80,8, bmp_select,0X8410);

	DrawUI_Bitmap_Ex(10+(index-1)*8,142,8,8,p,color);
}

const unsigned char bmp_battery[][38] = /** 19x16 */
{
{0xC0,0x03,0x38,0x1C,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0xF8,0x1F},/*"F:\BandAll\HB030\0915\状态栏\battery_level_0.BMP",0*/
{0xC0,0x03,0x38,0x1C,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xF8,0x1F},/*"F:\BandAll\HB030\0915\状态栏\battery_level_1.BMP",0*/
{0xC0,0x03,0x38,0x1C,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xF8,0x1F},/*"F:\BandAll\HB030\0915\状态栏\battery_level_2.BMP",0*/
{0xC0,0x03,0x38,0x1C,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xE8,0x17,0xE8,0x17,0xE8,0x17,0xE8,0x17,0x08,0x10,0xF8,0x1F},/*"F:\BandAll\HB030\0915\状态栏\battery_level_3.BMP",0*/
};


const unsigned char bmp_bluetooth[][36]=  /* 18x16 */
{
{0x00,0x00,0x10,0x04,0x20,0x02,0x40,0x01,0xFE,0x7F,0x82,0x40,0x44,0x21,0x28,0x12,0x10,0x0C,0x00,0x00,0x20,0x02,0xC8,0x09,0x10,0x04,0xE4,0x13,0x08,0x08,0xF0,0x07,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\状态栏\ble_off`.BMP",0*/
{0x00,0x00,0x10,0x04,0x20,0x02,0x40,0x01,0xFE,0x7F,0x82,0x40,0x44,0x21,0x28,0x12,0x10,0x0C,0x00,0x00},/*"F:\BandAll\HB030\0915\状态栏\ble_on.BMP",0*/
};
void UI_Draw_Title_Bluetooth(int x, int y)
{
	
}


void UI_Draw_Picture(int x, int y, int w, int h, const unsigned char *p)
{
	draw_bitmap(x, y, w, h, p);
}

int level_convert( int level )
{
	if ( level > 75 )
	{
		return 4;
	}else if ( level > 55 )
	{
		return 3;
	}else if ( level > 40 )
	{
		return 2;
	}else if ( level > 20 )
	{
		return 1;
	}else 
	{
		return 0;
	}
}

#define ALIGN_CENTER 0
#define ALIGN_LEFT   1
#define ALIGN_RIGHT  2

#define FONT_7X9_W 7
#define FONT_7X9_H 9

typedef struct
{
	int w, h;
	unsigned char *p;
}Font;

//Font Font7X9 = {
//	.w = FONT_7X9_W,
//	.h = FONT_7X9_H,
//	.p = (unsigned char *)Font7x9_2,
//};

//Font Font7X9_2 = {
//	.w = FONT_7X9_W,
//	.h = FONT_7X9_H,
//	.p = (unsigned char *)Font_7x9,
//};


#define COLOR_B      0XF3E0
#define COLOR_F      0xFFFF

void ui_show_val( int x, int y, int val, Font * font, int align)
{
	int width = 0, v = val;
	int w, h, idx, sx, ex;
	
	w = font->w; h = font->h;
	
	unsigned char *p;
	
	p = (unsigned char *)font->p;
	
	do{
		width++;
		v /= 10;
	}while(v>0);
	
	if ( align == ALIGN_CENTER )
	{
		sx = x+((80-x) - width*w)/2;
	}else if ( align == ALIGN_LEFT )
	{
		sx = x;
	}else if ( align == ALIGN_RIGHT )
	{
		sx = 80-width*w;
	}else{
		sx = x; // defalut
	}
	
	ex = sx + (width-1) * w;
	do
	{
		idx = val % 10;
		draw_bitmap(ex, y, w, h, p+idx*(w*h*2));
		val /= 10; ex -= w;
	}while( val > 0 );
}

const unsigned char Week[][52] = {
{0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x08,0x08,0x11,0x08,0x11,0x08,0x11,0x10,0x0E,0x00,0x00,0xF8,0x0F,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0xF8,0x0F,0x00,0x00,0xF8,0x1F,0x30,0x00,0xC0,0x00,0x00,0x03,0x00,0x0C,0xF8,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\1009\SUM.BMP",0*/
{0x00,0x00,0x00,0x00,0xF8,0x1F,0x10,0x00,0x20,0x00,0xC0,0x1F,0x20,0x00,0x10,0x00,0xF8,0x1F,0x00,0x00,0xE0,0x07,0x10,0x08,0x08,0x10,0x08,0x10,0x08,0x10,0x10,0x08,0xE0,0x07,0x00,0x00,0xF8,0x1F,0x10,0x00,0x60,0x00,0x80,0x01,0x00,0x06,0x00,0x08,0xF8,0x1F,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\MON.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x08,0x00,0xF8,0x1F,0x08,0x00,0x08,0x00,0x00,0x00,0xF8,0x0F,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0xF8,0x0F,0x00,0x00,0xF8,0x1F,0x88,0x10,0x88,0x10,0x88,0x10,0x88,0x10,0x88,0x10,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\TUE.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x1F,0x00,0x08,0x00,0x04,0xF8,0x03,0x00,0x04,0x00,0x08,0xF8,0x1F,0x00,0x00,0xF8,0x1F,0x88,0x10,0x88,0x10,0x88,0x10,0x88,0x10,0x00,0x00,0xF8,0x1F,0x08,0x10,0x08,0x10,0x08,0x10,0x10,0x08,0xE0,0x07,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\WED.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x08,0x00,0xF8,0x1F,0x08,0x00,0x08,0x00,0x00,0x00,0xF8,0x1F,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0xF8,0x1F,0x00,0x00,0xF8,0x0F,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0xF8,0x0F,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\THU.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x1F,0x88,0x00,0x88,0x00,0x88,0x00,0x88,0x00,0x00,0x00,0xF8,0x1F,0x88,0x00,0x88,0x00,0x88,0x00,0x88,0x00,0x70,0x1F,0x00,0x00,0x00,0x00,0xF8,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\FRI.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x08,0x88,0x10,0x88,0x10,0x88,0x10,0x10,0x0F,0x00,0x00,0xC0,0x1F,0xA0,0x00,0x90,0x00,0x88,0x00,0x90,0x00,0xA0,0x00,0xC0,0x1F,0x08,0x00,0x08,0x00,0xF8,0x1F,0x08,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\星期_36x16\修改26x16_9.15\SAT.BMP",0*/
};

inline void Draw_Week( int x, int y, int week)
{
   DrawUI_Bitmap_Ex(54,0,26,16,Week[week],0XFFFF);	
}

#include "UI_comm_icon.h"

const unsigned char Month[][52] = 
{
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x20,0x00,0x20,0x00,0x20,0xFC,0x1F,0x00,0x00,0x80,0x18,0x40,0x24,0x40,0x22,0x40,0x12,0x80,0x3F,0x00,0x20,0x00,0x00,0x80,0x3F,0x40,0x00,0x40,0x00,0x40,0x00,0x80,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\jan.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x1F,0x88,0x00,0x88,0x00,0x88,0x00,0x88,0x00,0x00,0x00,0xC0,0x0F,0x20,0x11,0x20,0x11,0x20,0x11,0xC0,0x0D,0x00,0x00,0xF8,0x0F,0x40,0x10,0x20,0x10,0x20,0x10,0x40,0x10,0x80,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\feb.bmp",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x1F,0x10,0x00,0xE0,0x00,0x00,0x07,0x00,0x18,0x00,0x07,0xE0,0x00,0x10,0x00,0xF8,0x1F,0x00,0x00,0x40,0x0E,0x20,0x11,0x20,0x11,0x20,0x11,0xC0,0x0F,0x00,0x10,0x00,0x00,0xE0,0x1F,0x40,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\mar.bmp",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0xF8,0x01,0x0E,0x01,0x0E,0x01,0xF8,0x01,0x80,0x07,0x00,0x00,0x00,0x00,0xE0,0x3F,0x10,0x04,0x10,0x04,0x10,0x04,0xE0,0x03,0x00,0x00,0x00,0x00,0xF0,0x0F,0x20,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\apr.bmp",0*/
{0x00,0x00,0x00,0x00,0xFE,0x0F,0x04,0x00,0xF8,0x00,0x80,0x03,0x00,0x0C,0x80,0x03,0x78,0x00,0x04,0x00,0xFE,0x0F,0x00,0x00,0x20,0x07,0x90,0x08,0x90,0x08,0x90,0x08,0xE0,0x07,0x00,0x08,0x70,0x00,0xC0,0x21,0x00,0x1E,0x00,0x03,0xE0,0x00,0x10,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\may.bmp",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x20,0x00,0x20,0x00,0x20,0xFC,0x1F,0x00,0x00,0x00,0x00,0xC0,0x1F,0x00,0x20,0x00,0x20,0x00,0x20,0xC0,0x1F,0x00,0x00,0x00,0x00,0x80,0x3F,0x40,0x00,0x40,0x00,0x40,0x00,0x80,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\jun.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x20,0x00,0x20,0x00,0x20,0xFC,0x1F,0x00,0x00,0x00,0x00,0xC0,0x1F,0x00,0x20,0x00,0x20,0x00,0x20,0xC0,0x1F,0x00,0x00,0x00,0x00,0xFC,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\jul.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0xE0,0x03,0x38,0x01,0x0E,0x01,0x38,0x01,0xE0,0x03,0x00,0x0E,0x00,0x00,0xF0,0x07,0x00,0x08,0x00,0x08,0x00,0x08,0xF0,0x07,0x00,0x00,0x00,0x00,0xE0,0x13,0x10,0x24,0x10,0x24,0x10,0x24,0xE0,0x1F,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\aug.bmp",0*/
{0x00,0x00,0x3C,0x06,0x42,0x08,0x42,0x08,0x42,0x08,0x42,0x08,0x8C,0x07,0x00,0x00,0x00,0x00,0xE0,0x07,0x90,0x08,0x90,0x08,0x90,0x08,0xE0,0x04,0x00,0x00,0xE0,0x3F,0x10,0x04,0x10,0x04,0x10,0x04,0xE0,0x03,0x00,0x00,0x10,0x00,0xFC,0x07,0x10,0x08,0x10,0x08,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\sept.bmp",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x0F,0x08,0x10,0x04,0x20,0x04,0x20,0x04,0x20,0x08,0x10,0xF0,0x0F,0x00,0x00,0xC0,0x1F,0x20,0x20,0x20,0x20,0x20,0x20,0xC0,0x18,0x00,0x00,0x20,0x00,0xF8,0x1F,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\oct.BMP",0*/
{0x00,0x00,0x00,0x00,0xFC,0x3F,0x08,0x00,0x70,0x00,0x80,0x03,0x00,0x0E,0x00,0x10,0xFC,0x3F,0x00,0x00,0x00,0x00,0xC0,0x1F,0x20,0x20,0x20,0x20,0x20,0x20,0xC0,0x1F,0x00,0x00,0x00,0x00,0x60,0x00,0x80,0x0F,0x00,0x30,0x80,0x0F,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\nov.BMP",0*/
{0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x1F,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x10,0x08,0xE0,0x07,0x00,0x00,0xC0,0x0F,0x20,0x11,0x20,0x11,0x20,0x11,0xC0,0x09,0x00,0x00,0xC0,0x0F,0x20,0x10,0x20,0x10,0x20,0x10,0x40,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"F:\BandAll\HB030\0915\月份_26x16\dec.bmp",0*/
};


#define PI 3.14159265       
#include "math.h"

const unsigned char bmp_battery_1[][38] = /** 19x16 */
{
{0x00,0x00,0xF0,0x0F,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x70,0x0E,0xC0,0x03,0x00,0x00,0x00,0x00},/*"F:\Band\HB021\尼加亚彩屏_80x160\尼加亚彩屏_80x160\切图\主界面\battery\battery_level_0.BMP",0*/
{0x00,0x00,0xF0,0x0F,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x70,0x0E,0xC0,0x03,0x00,0x00,0x00,0x00},/*"F:\Band\HB021\尼加亚彩屏_80x160\尼加亚彩屏_80x160\切图\主界面\battery\battery_level_1.BMP",0*/
{0x00,0x00,0xF0,0x0F,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x10,0x08,0x70,0x0E,0xC0,0x03,0x00,0x00,0x00,0x00},/*"F:\Band\HB021\尼加亚彩屏_80x160\尼加亚彩屏_80x160\切图\主界面\battery\battery_level_2.BMP",0*/
{0x00,0x00,0xF0,0x0F,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0xD0,0x0B,0xD0,0x0B,0xD0,0x0B,0x10,0x08,0x70,0x0E,0xC0,0x03,0x00,0x00,0x00,0x00},/*"F:\Band\HB021\尼加亚彩屏_80x160\尼加亚彩屏_80x160\切图\主界面\battery\battery_level_3.BMP",0*/
};


const unsigned char bmp_bluetooth_1[][24]=  /* 12x16 */
{
  {0xFF,0xFF,0xBF,0xFB,0x7F,0xFD,0x0F,0xE0,0xEF,0xEE,0x5F,0xF5,0xBF,0xFB,0xFF,0xFE,0xBF,0xFB,0x7F,0xFC,0xDF,0xF7,0x3F,0xF8},/*"F:\BandAll\HB022\HB022Éè±¸UI\DennyÐÞ¸Ä\Ð¡Í¼±ê\ble_off.BMP",0*/
  {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xBF,0xFB,0x7F,0xFD,0x0F,0xE0,0xEF,0xEE,0x5F,0xF5,0xBF,0xFB,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},/*"F:\BandAll\HB022\HB022Éè±¸UI\DennyÐÞ¸Ä\Ð¡Í¼±ê\ble_on.BMP",0*/
};
void UI_Draw_Title_Bluetooth_1(void)
{
	
}

unsigned char fristBootFlag = 1;
unsigned char showLogoFlag = 1;
	
void show_ui_logo(void)
{	
}

const unsigned char Font_7x12[][14] = 
{
{0xF0,0x00,0x0C,0x03,0x04,0x02,0x04,0x02,0x08,0x03,0xF0,0x00,0x00,0x00},/*"0",0*/
{0x00,0x00,0x08,0x02,0x08,0x02,0xFC,0x03,0x00,0x02,0x00,0x02,0x00,0x00},/*"1",1*/
{0x00,0x00,0x18,0x03,0x84,0x02,0x44,0x02,0x24,0x02,0x18,0x02,0x00,0x00},/*"2",2*/
{0x00,0x00,0x08,0x01,0x04,0x02,0x24,0x02,0x24,0x02,0xD8,0x01,0x00,0x00},/*"3",3*/
{0x40,0x00,0xA0,0x00,0x90,0x00,0x88,0x00,0xFC,0x03,0x80,0x02,0x00,0x00},/*"4",4*/
{0x00,0x00,0x3C,0x01,0x24,0x02,0x24,0x02,0x24,0x02,0xC4,0x01,0x00,0x00},/*"5",5*/
{0xF0,0x01,0x48,0x02,0x24,0x02,0x24,0x02,0x24,0x02,0xCC,0x01,0x00,0x00},/*"6",6*/
{0x00,0x00,0x0C,0x00,0x04,0x00,0xE4,0x03,0x14,0x00,0x0C,0x00,0x00,0x00},/*"7",7*/
{0xD8,0x01,0x24,0x02,0x24,0x02,0x44,0x02,0x64,0x02,0x98,0x01,0x00,0x00},/*"8",8*/
{0x38,0x03,0x44,0x02,0x44,0x02,0x44,0x02,0x24,0x01,0xF8,0x00,0x00,0x00},/*"9",9*/	
};

const unsigned char FChip_Text[][14] = {
{0x04,0x02,0xFC,0x03,0x24,0x02,0x24,0x00,0x74,0x00,0x04,0x00,0x08,0x00},/*"F",0*/
{0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00},/*"-",1*/
{0xF0,0x00,0x08,0x03,0x04,0x02,0x04,0x02,0x04,0x02,0x0C,0x01,0x00,0x00},/*"C",2*/
{0x04,0x02,0xFC,0x03,0x20,0x02,0x20,0x00,0x20,0x02,0xC0,0x03,0x00,0x02},/*"h",3*/
{0x00,0x00,0x20,0x02,0x20,0x02,0xE4,0x03,0x00,0x02,0x00,0x02,0x00,0x00},/*"i",4*/
{0x20,0x08,0xE0,0x0F,0x20,0x0A,0x20,0x02,0x20,0x02,0xC0,0x01,0x00,0x00},/*"p",5*/
};
	
const unsigned char FChip_Error[][14] = 
{
{0x04,0x02,0xFC,0x03,0x24,0x02,0x24,0x02,0x74,0x02,0x0C,0x03,0x00,0x00},/*"E",0*/
{0x20,0x02,0x20,0x02,0xE0,0x03,0x40,0x02,0x20,0x02,0x20,0x00,0x00,0x00},/*"r",1*/
{0x20,0x02,0x20,0x02,0xE0,0x03,0x40,0x02,0x20,0x02,0x20,0x00,0x00,0x00},/*"r",2*/
{0x00,0x00,0xC0,0x01,0x20,0x02,0x20,0x02,0x20,0x02,0xC0,0x01,0x00,0x00},/*"o",3*/
{0x20,0x02,0x20,0x02,0xE0,0x03,0x40,0x02,0x20,0x02,0x20,0x00,0x00,0x00},/*"r",4*/	
};

const unsigned char GSensor_Text[][14] = 
{
{0xF0,0x00,0x08,0x01,0x04,0x02,0x04,0x02,0x44,0x02,0xCC,0x01,0x40,0x00},/*"G",0*/
{0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00},/*"-",1*/
{0x00,0x00,0x18,0x03,0x24,0x02,0x24,0x02,0x44,0x02,0xCC,0x01,0x00,0x00},/*"S",2*/
{0x00,0x00,0xC0,0x01,0xA0,0x02,0xA0,0x02,0xA0,0x02,0xC0,0x02,0x00,0x00},/*"e",3*/
{0x20,0x02,0xE0,0x03,0x40,0x02,0x20,0x00,0x20,0x02,0xC0,0x03,0x00,0x02},/*"n",4*/
{0x00,0x00,0x60,0x03,0xA0,0x02,0xA0,0x02,0xA0,0x02,0x20,0x03,0x00,0x00},/*"s",5*/
{0x00,0x00,0xC0,0x01,0x20,0x02,0x20,0x02,0x20,0x02,0xC0,0x01,0x00,0x00},/*"o",6*/
{0x20,0x02,0x20,0x02,0xE0,0x03,0x40,0x02,0x20,0x02,0x20,0x00,0x00,0x00},/*"r",7*/	
};

const unsigned char OK[][14] = 
{
{0xF0,0x00,0x08,0x03,0x04,0x02,0x04,0x02,0x0C,0x03,0xF0,0x00,0x00,0x00},/*"O",0*/
{0x04,0x02,0xFC,0x03,0x24,0x02,0x74,0x00,0x9C,0x02,0x0C,0x03,0x04,0x02},/*"K",1*/
};

const unsigned char HR_Text[][14] = 
{
{0x04,0x02,0xFC,0x03,0x24,0x02,0x20,0x00,0x24,0x02,0xFC,0x03,0x04,0x02},/*"H",0*/
{0x04,0x02,0xFC,0x03,0x24,0x02,0x64,0x00,0xA4,0x00,0x18,0x03,0x00,0x02},/*"R",1*/
};

#include "version.h"

const unsigned char GSensor_Wait[] = {0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00};/*"未命名文件",0*/	
const unsigned char line_[] = {0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01};/*"F:\HW011_4\Test\00.BMP",0*/
extern unsigned long gsensor_ok;
extern short current_touch_adc;
	
const unsigned char Font_str[][27] = 
{

{0x20,0x00,0x10,0xE0,0xFF,0x1F,0xE0,0xFF,0x1F,0x20,0x10,0x10,0x20,0x10,0x00,0x20,0x7C,0x00,0x60,0x7C,0x00,0xE0,0x01,0x00,0x80,0x01,0x00},/*"F",0*/

{0x00,0x00,0x00,0x00,0xE0,0x07,0x00,0xF8,0x0F,0x00,0x1C,0x18,0x00,0x04,0x10,0x00,0x04,0x10,0x00,0x1C,0x1C,0x00,0xF8,0x0F,0x00,0xE0,0x03},/*"o",1*/

{0x00,0x04,0x10,0x00,0xFC,0x1F,0x00,0xFC,0x1F,0x00,0x08,0x10,0x00,0x0C,0x00,0x00,0x04,0x00,0x00,0x0C,0x10,0x00,0xFC,0x1F,0x00,0xF8,0x1F},/*"n",2*/

{0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x04,0x00,0xC0,0xFF,0x0F,0xC0,0xFF,0x1F,0x00,0x04,0x10,0x00,0x04,0x18,0x00,0x00,0x08,0x00,0x00,0x00},/*"t",3*/

};	

const unsigned char GS_str[][27] = 
{


{0x00,0xFE,0x01,0x80,0xFF,0x07,0xC0,0x01,0x0E,0x60,0x00,0x18,0x20,0x00,0x10,0x20,0x00,0x10,0x60,0x40,0x10,0xE0,0xC1,0x1F,0xE0,0xC1,0x0F},/*"G",0*/

{0x00,0x00,0x00,0x80,0x07,0x1F,0xC0,0x0F,0x1F,0x60,0x18,0x18,0x20,0x10,0x10,0x20,0x30,0x10,0x60,0x60,0x18,0xE0,0xE1,0x0F,0xE0,0x81,0x07},/*"S",1*/

{0x00,0x00,0x00,0x00,0xF0,0x07,0x00,0xF8,0x0F,0x00,0x4C,0x1C,0x00,0x44,0x10,0x00,0x44,0x10,0x00,0x4C,0x18,0x00,0x78,0x1C,0x00,0x70,0x04},/*"e",2*/

{0x00,0x04,0x10,0x00,0xFC,0x1F,0x00,0xFC,0x1F,0x00,0x08,0x10,0x00,0x0C,0x00,0x00,0x04,0x00,0x00,0x0C,0x10,0x00,0xFC,0x1F,0x00,0xF8,0x1F},/*"n",3*/

{0x00,0x04,0x10,0x00,0x04,0x10,0x00,0xFC,0x1F,0x00,0xFC,0x1F,0x00,0x18,0x10,0x00,0x0C,0x10,0x00,0x04,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00},/*"r",4*/


};
	
const unsigned char Batt[][27] = 
{
{0x20,0x00,0x10,0xE0,0xFF,0x1F,0xE0,0xFF,0x1F,0x20,0x10,0x10,0x20,0x10,0x10,0x60,0x18,0x10,0xE0,0x3F,0x18,0xC0,0xE7,0x0F,0x00,0xC0,0x07},/*"B",0*/
{0x00,0x00,0x00,0x00,0x18,0x0F,0x00,0xDC,0x1F,0x00,0xC4,0x18,0x00,0x64,0x10,0x00,0x24,0x18,0x00,0xFC,0x1F,0x00,0xF8,0x1F,0x00,0x00,0x18},/*"a",1*/
{0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x04,0x00,0xC0,0xFF,0x0F,0xC0,0xFF,0x1F,0x00,0x04,0x10,0x00,0x04,0x18,0x00,0x00,0x08,0x00,0x00,0x00},/*"t",2*/
{0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x04,0x00,0xC0,0xFF,0x0F,0xC0,0xFF,0x1F,0x00,0x04,0x10,0x00,0x04,0x18,0x00,0x00,0x08,0x00,0x00,0x00},/*"t",3*/
};

const unsigned char Hr[][27] = 
{
{0x20,0x00,0x10,0xE0,0xFF,0x1F,0xE0,0xFF,0x1F,0x20,0x10,0x10,0x00,0x10,0x00,0x20,0x10,0x10,0xE0,0xFF,0x1F,0xE0,0xFF,0x1F,0x20,0x00,0x10},/*"H",0*/
{0x20,0x00,0x10,0xE0,0xFF,0x1F,0xE0,0xFF,0x1F,0x20,0x10,0x10,0x20,0x70,0x00,0x60,0xF8,0x03,0xE0,0x8F,0x1F,0xC0,0x07,0x1C,0x00,0x00,0x10},/*"R",1*/
};

const unsigned char OK_[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x80,0x07,0x00,0x00,0x1F,0x00,0x00,0x78,0x00,0x00,0xF0,0x01,0x00,0x80,0x03,0x00,0x80,0x03,0x00,0xC0,0x01,0x00,0xE0,0x00,0x00,0x70,0x00,0x00,0x18,0x00,0x00,0x0E,0x00,0x00,0x07,0x00,0x80,0x03,0x00,0xC0,0x01,0x00,0xC0,0x00,0x00,0x70,0x00,0x00,0x30,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};/*"F:\OK.BMP",0*/
const unsigned char ERR_[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x60,0x80,0x01,0xC0,0xC0,0x00,0x80,0x41,0x00,0x00,0x33,0x00,0x00,0x16,0x00,0x00,0x0C,0x00,0x00,0x1C,0x00,0x00,0x16,0x00,0x00,0x63,0x00,0x80,0x41,0x00,0x80,0xC0,0x00,0xC0,0x80,0x01,0x60,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};/*"未命名文件",0*/ 

void UI_Draw_Title_test(int x, int y)
{
	
}	

const unsigned char FONT_s[][32]=
{
{0x10,0x02,0x1C,0x02,0x0C,0x02,0x24,0x02,0x24,0x02,0x24,0x42,0x25,0xC2,0x27,0xFF,0xA6,0x7F,0xE4,0x02,0x64,0x02,0x24,0x02,0x04,0x02,0x14,0x02,0x1C,0x02,0x0C,0x02},/*"字",0*/
{0x00,0x40,0x00,0x70,0xFC,0x3F,0xFC,0x1F,0x24,0x13,0xA4,0x13,0xE4,0x12,0x7D,0x12,0xBF,0xFF,0xA6,0xFF,0x24,0x12,0x24,0x12,0x24,0x12,0x24,0x12,0x24,0x10,0x04,0x10},/*"库",1*/
};

const unsigned char GSensor_s[][32] = 
{
{0x40,0x00,0x40,0x00,0x42,0x00,0xCE,0x7F,0xCC,0x7F,0x40,0x30,0x40,0x10,0x40,0x00,0x40,0x00,0xFF,0xFF,0xFF,0xFF,0x40,0x00,0x40,0x00,0x40,0x00,0x40,0x00,0x40,0x00},/*"计",0*/
{0x40,0x80,0x40,0x90,0x40,0x98,0x7C,0xCE,0x7C,0x46,0x40,0x40,0x40,0x60,0xFF,0x2F,0xFF,0x3F,0x44,0x10,0x44,0x18,0x44,0x0C,0x44,0x06,0x44,0x02,0x40,0x00,0x40,0x00},/*"步",1*/	
};

const unsigned char Batt_s[][32] = 
{
{0x00,0x00,0x00,0x00,0xF8,0x1F,0xF8,0x1F,0x88,0x08,0x88,0x08,0x88,0x08,0xFF,0x7F,0xFF,0xFF,0x88,0x88,0x88,0x88,0x88,0x88,0xF8,0x9F,0xF8,0x9F,0x00,0xF0,0x00,0xF0},/*"电",0*/
{0x10,0x04,0x70,0x04,0x62,0x7E,0xCE,0x7F,0xCC,0x01,0x80,0x00,0xFC,0x3F,0xFC,0x7F,0x60,0x40,0xFF,0x4F,0xFF,0x4F,0x18,0x44,0xF8,0x47,0xF8,0x47,0x00,0x78,0x00,0x78},/*"池",1*/
};

const unsigned char Charge_s[][32] = 
{
{0x04,0x00,0x04,0x80,0x84,0x80,0xC4,0xC0,0xE4,0x70,0xBC,0x3F,0x9D,0x0F,0x87,0x00,0x86,0x00,0x84,0x7F,0xA4,0xFF,0xE4,0x80,0xC4,0x81,0x84,0xF1,0x04,0xF0,0x04,0x00},/*"充",0*/
{0x00,0x00,0x00,0x00,0xF8,0x1F,0xF8,0x1F,0x88,0x08,0x88,0x08,0x88,0x08,0xFF,0x7F,0xFF,0xFF,0x88,0x88,0x88,0x88,0x88,0x88,0xF8,0x9F,0xF8,0x9F,0x00,0xF0,0x00,0xF0},/*"电",1*/
};


const unsigned char HR_s[][32] = 
{
{0x00,0x10,0x00,0x1C,0x80,0x0F,0x80,0x03,0x00,0x00,0xE0,0x3F,0xE2,0x7F,0x06,0x40,0x1C,0x40,0x18,0x40,0x00,0x40,0x00,0x78,0x40,0x78,0xC0,0x01,0x80,0x0F,0x00,0x0E},/*"心",0*/
{0x00,0x08,0x14,0x09,0xB4,0x09,0xE4,0x08,0x64,0x09,0x34,0x09,0xBD,0x09,0xEF,0xFD,0x66,0xFD,0xB4,0x09,0x94,0x0B,0x44,0x0B,0xE4,0x08,0xB4,0x09,0x14,0x09,0x00,0x08},/*"率",1*/
};

const unsigned char _OK_[][32] = 
{
{0x00,0x00,0xC0,0x07,0xE0,0x0F,0xF0,0x1F,0x30,0x18,0x18,0x30,0x08,0x20,0x08,0x20,0x08,0x20,0x08,0x20,0x08,0x20,0x18,0x30,0x30,0x18,0xF0,0x1F,0xE0,0x0F,0xC0,0x07},/*"O",0*/
{0x00,0x00,0x08,0x20,0x08,0x20,0xF8,0x3F,0xF8,0x3F,0xF8,0x3F,0x08,0x21,0x88,0x21,0xC0,0x03,0xC0,0x07,0x68,0x2F,0x38,0x3E,0x18,0x3C,0x18,0x38,0x08,0x30,0x08,0x20},/*"K",1*/
};

const unsigned char Font_Flash[][32] = 
{
{0x10,0x42,0x10,0xC2,0xFF,0xFF,0xFF,0x7F,0x90,0x09,0xDC,0x4D,0xFC,0x6F,0xB4,0x2B,0xE5,0x8B,0xE7,0xFA,0xF6,0xFA,0xF4,0x0B,0xA4,0x2B,0xF4,0x6E,0x7C,0x4C,0x0C,0x08},/*"擦",0*/
{0x00,0x00,0xFE,0xFF,0xFE,0xFF,0x7A,0x0C,0xDE,0x2F,0xA6,0x37,0x30,0x1D,0x38,0x4D,0x2C,0xC1,0xE7,0xFF,0xE7,0x7F,0x2C,0x05,0x38,0x0D,0x30,0x39,0x20,0x31,0x20,0x00},/*"除",1*/

{0x08,0x08,0x0E,0x08,0x86,0x09,0xFA,0x09,0x7A,0x09,0x22,0x09,0x22,0x09,0x22,0x09,0x22,0x09,0x22,0x49,0x22,0xC9,0x22,0xC1,0x22,0x7F,0x2A,0x3F,0x0E,0x00,0x06,0x00},/*"写",3*/
{0x00,0x80,0x00,0xC0,0x00,0x60,0x00,0x30,0x00,0x1C,0x01,0x0F,0xE3,0x03,0xFE,0x00,0xFC,0x00,0xE0,0x03,0x00,0x0F,0x00,0x3C,0x00,0x70,0x00,0xC0,0x00,0x80,0x00,0x80},/*"入",4*/

{0x10,0x04,0x10,0x07,0xD0,0x03,0xFF,0xFF,0xFF,0xFF,0x90,0x01,0x90,0x81,0xC8,0x80,0x68,0xC3,0x29,0x6F,0x0F,0x3C,0x0E,0x3C,0x28,0x6F,0x68,0xC3,0xC8,0x80,0x88,0x80},/*"校",6*/
{0x02,0x08,0xFA,0x18,0xFA,0x58,0x82,0xCC,0xFE,0xC4,0xFE,0x7F,0xC0,0x7F,0x60,0x44,0x70,0x5C,0x5C,0x59,0x4F,0x4F,0x4F,0x6E,0x5C,0x78,0x70,0x5F,0x60,0x47,0x40,0x40},/*"验",7*/

{0x40,0x80,0x42,0xC0,0xCE,0x7F,0xCC,0x7F,0x00,0xC0,0xE2,0xFF,0xE2,0xFF,0x2A,0x89,0x2A,0x89,0xFA,0xBF,0xFA,0xBF,0x2E,0xA9,0x26,0xE9,0xE2,0xFF,0xE0,0xBF,0x00,0x80},/*"通",9*/
{0x40,0x00,0x40,0x40,0x42,0x60,0xCE,0x3F,0xCC,0x3F,0x08,0x60,0x48,0x40,0xC8,0x41,0x88,0x41,0x08,0x48,0x08,0x58,0xFF,0x5F,0xFF,0x4F,0x08,0x40,0x08,0x40,0x08,0x40},/*"过",10*/

{0x00,0x81,0x40,0x81,0x70,0xC1,0x3E,0x61,0x1E,0x31,0x10,0x1D,0x10,0x0F,0xFF,0x03,0xFF,0x03,0x10,0x0F,0x10,0x1D,0x10,0x31,0x10,0x61,0x10,0xC1,0x00,0x81,0x00,0x81},/*"失",12*/
{0x00,0x80,0xFE,0xC7,0xFE,0x77,0xFA,0x3F,0xFA,0x1F,0xFE,0x77,0xFE,0xE7,0x60,0xC0,0xF8,0x61,0xDF,0x37,0x17,0x1E,0x10,0x1E,0xF0,0x37,0xF0,0x61,0x10,0xC0,0x10,0x80},/*"败",13*/
};

const unsigned char Font_8x16_1[][16] = 
{
{0x00,0x00,0xE0,0x0F,0xF0,0x1F,0x18,0x30,0x08,0x20,0x18,0x30,0xF0,0x1F,0xE0,0x0F},/*"0",0*/

{0x00,0x00,0x10,0x20,0x10,0x20,0xF8,0x3F,0xF8,0x3F,0x00,0x20,0x00,0x20,0x00,0x00},/*"1",1*/

{0x00,0x00,0x70,0x30,0x78,0x38,0x08,0x2C,0x08,0x26,0x88,0x23,0xF8,0x31,0x70,0x30},/*"2",2*/

{0x00,0x00,0x30,0x18,0x38,0x38,0x88,0x20,0x88,0x20,0xC8,0x31,0x78,0x1F,0x30,0x0E},/*"3",3*/

{0x00,0x00,0x00,0x07,0xC0,0x07,0xE0,0x24,0x30,0x24,0xF8,0x3F,0xF8,0x3F,0x00,0x24},/*"4",4*/

{0x00,0x00,0xF8,0x19,0xF8,0x39,0x88,0x21,0x88,0x20,0x88,0x31,0x08,0x1F,0x08,0x0E},/*"5",5*/

{0x00,0x00,0xE0,0x0F,0xF0,0x1F,0x98,0x31,0x88,0x20,0x98,0x31,0x18,0x1F,0x00,0x0E},/*"6",6*/

{0x00,0x00,0x38,0x00,0x38,0x00,0x08,0x3F,0xC8,0x3F,0xF8,0x00,0x38,0x00,0x08,0x00},/*"7",7*/

{0x00,0x00,0x70,0x1C,0xF8,0x3E,0x88,0x23,0x08,0x21,0x88,0x23,0xF8,0x3E,0x70,0x1C},/*"8",8*/

{0x00,0x00,0xE0,0x00,0xF0,0x31,0x18,0x33,0x08,0x22,0x18,0x33,0xF0,0x1F,0xE0,0x0F},/*"9",9*/

{0x00,0x00,0x00,0x60,0x00,0x78,0x00,0x1E,0x80,0x07,0xE0,0x01,0x78,0x00,0x1C,0x00},/*"/",10*/  
{0x00,0x00,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*".",0*/
};
    
const unsigned char Font_Info[][32] = 
{
{0x80,0x20,0x80,0x20,0x88,0x30,0x88,0x18,0x88,0x0C,0x88,0x06,0x88,0x03,0xFF,0xFF,0xFF,0xFF,0x88,0x03,0x88,0x06,0x88,0x0C,0x88,0x18,0x88,0x30,0x80,0x20,0x80,0x20},/*"未",0*/

{0x10,0x04,0x10,0x07,0xD0,0x03,0xFF,0xFF,0xFF,0xFF,0xD0,0x41,0x70,0x45,0x70,0x5C,0x5C,0x59,0x4F,0x4F,0x4F,0x6E,0x5C,0x78,0x70,0x5F,0x60,0x47,0x40,0x40,0x40,0x40},/*"检",1*/

{0x10,0x04,0x70,0x04,0x62,0x7E,0x8E,0x7F,0x8C,0x81,0xFE,0xC7,0xFE,0x77,0xF2,0x3F,0xF2,0x1F,0xFE,0x37,0xFE,0x27,0xF8,0x47,0xF8,0xC7,0xFF,0xFF,0xFF,0x7F,0x00,0x00},/*"测",2*/

{0x42,0x40,0x62,0xC4,0x72,0xC4,0x5A,0x44,0xCE,0x7F,0xC6,0x7F,0x52,0x24,0x72,0x24,0xE2,0x24,0xC2,0x20,0xF8,0x0F,0xF8,0x4F,0x00,0xC0,0xFF,0xFF,0xFF,0x7F,0x00,0x00},/*"到",3*/

{0x10,0x02,0x1C,0x02,0x0C,0x02,0x24,0x02,0x24,0x02,0x24,0x42,0x25,0xC2,0x27,0xFF,0xA6,0x7F,0xE4,0x02,0x64,0x02,0x24,0x02,0x04,0x02,0x14,0x02,0x1C,0x02,0x0C,0x02},/*"字",4*/

{0x00,0x40,0x00,0x70,0xFC,0x3F,0xFC,0x1F,0x24,0x13,0xA4,0x13,0xE4,0x12,0x7D,0x12,0xBF,0xFF,0xA6,0xFF,0x24,0x12,0x24,0x12,0x24,0x12,0x24,0x12,0x24,0x10,0x04,0x10},/*"库",5*/

{0x04,0x10,0x04,0x18,0x04,0x0E,0x04,0x06,0x1F,0x00,0x1F,0x3F,0x24,0x7F,0x64,0x40,0xC4,0x40,0x84,0x40,0x1F,0x40,0x1F,0x70,0x04,0x71,0x04,0x03,0x04,0x0E,0x04,0x0C},/*"芯",6*/

{0x00,0x00,0x00,0x80,0x00,0xE0,0xFE,0x7F,0xFE,0x1F,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x3F,0x02,0x3F,0xFE,0x20,0xFE,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00},/*"片",7*/

{0x00,0x00,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*".",8*/

{0x00,0x00,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*".",9*/

{0x00,0x00,0x00,0x30,0x00,0x30,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*".",10*/    
};

extern unsigned long Flash_stat;

extern unsigned long erase_All_page;
extern unsigned long erase_Cur_page;

extern unsigned long write_All_page;
extern unsigned long write_Cur_page;

extern unsigned long read_All_page;
extern unsigned long read_Cur_page;

extern unsigned char font_ok;

void show_test_ui(void)
{
	// Font-Chip test
    
    if ( font_ok == 0 && osal_systemClock > 100 )
    {
        DrawUI_Bitmap( 0,64,16,16,Font_Info[0],0x1F<<11,0x00);
        DrawUI_Bitmap(16,64,16,16,Font_Info[1],0x1F<<11,0x00);
        DrawUI_Bitmap(32,64,16,16,Font_Info[2],0x1F<<11,0x00);
        DrawUI_Bitmap(48,64,16,16,Font_Info[3],0x1F<<11,0x00);
        DrawUI_Bitmap(64,64,16,16,Font_Info[4],0x1F<<11,0x00);

        DrawUI_Bitmap(4, 80,16,16,Font_Info[5],0x1F<<11,0x00);
        DrawUI_Bitmap(20,80,16,16,Font_Info[6],0x1F<<11,0x00);
        DrawUI_Bitmap(36,80,16,16,Font_Info[7],0x1F<<11,0x00);
        DrawUI_Bitmap(52,80,16,16,Font_Info[8],0x1F<<11,0x00);
        DrawUI_Bitmap(60,80,16,16,Font_Info[8],0x1F<<11,0x00);
        DrawUI_Bitmap(68,80,16,16,Font_Info[8],0x1F<<11,0x00);
        
        return;
    }
	
    if ( Flash_stat == 0 || Flash_stat > 0)
    {
        DrawUI_Bitmap( 0,16,16,16,Font_Flash[0],0xFFFF,0x00);
        DrawUI_Bitmap(16,16,16,16,Font_Flash[1],0xFFFF,0x00);
        DrawUI_Bitmap(32,16,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(40,16,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(48,16,8,16,Font_8x16_1[11],0xFFFF,0x00);
            
        DrawUI_Bitmap(0,32,8,16,Font_8x16_1[erase_Cur_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(8,32,8,16,Font_8x16_1[(erase_Cur_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(16,32,8,16,Font_8x16_1[erase_Cur_page%10],0xFFFF,0x00);   

        DrawUI_Bitmap(24,32,8,16,Font_8x16_1[10],0xFFFF,0x00);

        DrawUI_Bitmap(32,32,8,16,Font_8x16_1[erase_All_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(40,32,8,16,Font_8x16_1[(erase_All_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(48,32,8,16,Font_8x16_1[erase_All_page%10],0xFFFF,0x00);   
    }  

    if ( Flash_stat == 1 || Flash_stat > 1 )
    {
        DrawUI_Bitmap( 0,48,16,16,Font_Flash[2],0xFFFF,0x00);
        DrawUI_Bitmap(16,48,16,16,Font_Flash[3],0xFFFF,0x00);
        DrawUI_Bitmap(32,48,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(40,48,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(48,48,8,16,Font_8x16_1[11],0xFFFF,0x00);        
            
        DrawUI_Bitmap(0,64,8,16,Font_8x16_1[write_Cur_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(8,64,8,16,Font_8x16_1[(write_Cur_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(16,64,8,16,Font_8x16_1[write_Cur_page%10],0xFFFF,0x00);   

        DrawUI_Bitmap(24,64,8,16,Font_8x16_1[10],0xFFFF,0x00);

        DrawUI_Bitmap(32,64,8,16,Font_8x16_1[write_All_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(40,64,8,16,Font_8x16_1[(write_All_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(48,64,8,16,Font_8x16_1[write_All_page%10],0xFFFF,0x00);   
    }    
    
    if ( Flash_stat == 2 || Flash_stat > 2 )
    {
        DrawUI_Bitmap( 0,80,16,16,Font_Flash[4],0xFFFF,0x00);
        DrawUI_Bitmap(16,80,16,16,Font_Flash[5],0xFFFF,0x00);
        DrawUI_Bitmap(32,80,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(40,80,8,16,Font_8x16_1[11],0xFFFF,0x00);
        DrawUI_Bitmap(48,80,8,16,Font_8x16_1[11],0xFFFF,0x00);        
            
        DrawUI_Bitmap(0,96,8,16,Font_8x16_1[read_Cur_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(8,96,8,16,Font_8x16_1[(read_Cur_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(16,96,8,16,Font_8x16_1[read_Cur_page%10],0xFFFF,0x00);   

        DrawUI_Bitmap(24,96,8,16,Font_8x16_1[10],0xFFFF,0x00);

        DrawUI_Bitmap(32,96,8,16,Font_8x16_1[read_All_page/100],0xFFFF,0x00);
        DrawUI_Bitmap(40,96,8,16,Font_8x16_1[(read_All_page/10)%10],0xFFFF,0x00);
        DrawUI_Bitmap(48,96,8,16,Font_8x16_1[read_All_page%10],0xFFFF,0x00);   
    }  

    if ( Flash_stat == 3 || Flash_stat > 3 )
    {
        if ( read_Cur_page == read_All_page )  
        {
            DrawUI_Bitmap( 0,112,16,16,Font_Flash[6],0x3f<<5,0x00);
            DrawUI_Bitmap(16,112,16,16,Font_Flash[7],0x3f<<5,0x00);
        } else
        {
            DrawUI_Bitmap( 0,112,16,16,Font_Flash[8],0x1f<<11,0x00);
            DrawUI_Bitmap(16,112,16,16,Font_Flash[9],0x1f<<11,0x00);
        }    
    }
}

#include "Task_Flash.h"

unsigned long win_main_proc(unsigned long wid, unsigned long msg_type, 
                            unsigned long msg_param, unsigned long *p)
{
	if ( msg_type & WINDOW_CREATE )
	{
		win_ticks = 0; // test_enable = 1;
				
		osal_set_event( taskGUITaskId, TASK_GUI_UPDATE_EVT );
		
		return ( msg_type ^ WINDOW_CREATE );
	}
	
	if ( msg_type & WINDOW_UPDATE )
	{
		win_ticks++;
		
		if ( win_ticks > 3 )
		{
			showLogoFlag = 0;
			fristBootFlag = 0;
		}
 
		if ( win_ticks > 500 )									
		{
			lcd_display(0);
			
			return ( msg_type ^ WINDOW_UPDATE );
		}

		memset( frame_buffer, 0, sizeof(frame_buffer));
	
		show_test_ui();
	
		if ( config.lcdEnable == 0 )
		{
			lcd_display(1);
		}			
		
		sync_frame();
		
		osal_start_timerEx( taskGUITaskId, TASK_GUI_UPDATE_EVT, 500);
		
		return ( msg_type ^ WINDOW_UPDATE );
	}
	
	if ( msg_type & WINDOW_TOUCH )
	{	
		win_ticks = 0;
		
		if ( config.lcdEnable == 0 )
		{
			osal_set_event( taskGUITaskId, TASK_GUI_UPDATE_EVT );
		}
        
		return ( msg_type ^ WINDOW_TOUCH );
	}
	
	if ( msg_type & WINDOW_PRESS )
	{
		win_ticks = 0;
		
		if ( config.lcdEnable == 0 )
		{
			msg_type |= WINDOW_UPDATE;
			
			return ( msg_type ^ WINDOW_PRESS );
		}else {
		}
		
		msg_type |= WINDOW_UPDATE;
		
		return ( msg_type ^ WINDOW_PRESS );
	}
	
	if ( msg_type & WINDOW_NOTIFY )
	{   
        /* 当前窗体入栈 */
        window_push( win_current );
        
        /* 通知界面作为当前界面 */
        win_current = NOTIFY_WIN_ID_GET();
        
        /* 调用窗体回调函数以便创建窗体  */
        window[win_current].wproc( win_current, WINDOW_CREATE, 0, 0);
		
		return ( msg_type ^ WINDOW_NOTIFY );
	}
	
	if ( msg_type & WINDOW_DISTORY )
	{
		window_pop(&win_current);
		
		return window[win_current].wproc( win_current, WINDOW_CREATE, 0, 0 );
	}

    return 0;
}

